
# py_text_in_order

([Read in Spanish](README-es.md))

This repo provides a set of Python functions for processing optical
character recognition (OCR) data generated by the DocumentAI API and
stored in JSON files. It allows for extracting, ordering, and grouping
words and lines, as well as generating text files from the OCR data
processed with DocumentAI.

In the data obtained through OCR (Optical Character Recognition), it is
common to find that words are not in the correct order due to processing
errors or the structure of the document itself. This can affect the
reading and interpretation of the extracted text. Here we present a set
of tools to process and correctly order the words in digital documents,
thereby improving the organization of the text and facilitating its
analysis.

## Text Processing Module

This module offers several key functions to load, extract, and order the
words detected by OCR, organizing them into coherent lines of text. The
main functions are:

### Main Functions

- **`load_ocr_data(json_path)`**: This function loads the OCR data from
  a JSON file, returning a dictionary with the content. It is useful
  when the OCR results are stored in this format.

- **`extract_words(ocr_data)`**: Extracts the words and their
  corresponding coordinates from the OCR data. It returns a list of
  dictionaries representing each word along with its position in the
  image (coordinates), allowing for correct ordering and processing of
  the words.

- **`order_words(words, vertical_tolerance=6)`**: This function
  organizes the extracted words into lines, taking into account their
  vertical and horizontal positions. This is useful for correctly
  reconstructing the text when the words are not in the appropriate
  order.

- **`group_words_by_line(ordered_words, vertical_tolerance=6)`**: Groups
  the words into coherent lines of text based on their position and
  returns a list of ordered text lines.

### Example Usage

``` python
input_directory = './input_directory'
output_directory = './output_directory'
procesar_directorio(input_directory, output_directory)
```
